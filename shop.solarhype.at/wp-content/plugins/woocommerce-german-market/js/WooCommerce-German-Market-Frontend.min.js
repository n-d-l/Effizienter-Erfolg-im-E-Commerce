var gm_hide_ship_to_different_address=!1;jQuery(document).ready(function(e){var a={init:function(){this.remove_totals(),this.register_payment_update(),this.on_update_variation(),this.sepa_direct_debit(),this.sepa_direct_debit_checkout_form_handle(),this.second_checkout_place_order(),this.deactivate_ship_to_different_adress(),this.deactivate_ship_to_different_address_purchase_on_account(),this.shipping_service_provider(),this.product_review_info()},product_review_info:function(){if(e(german_market_legal_info_product_reviews.element).length){jQuery.post(sepa_ajax_object.ajax_url,{action:"product_review_info"},function(a){e(a).insertBefore(german_market_legal_info_product_reviews.element)})}e(".german-market-legal-information-for-product-reviews.short-after-star-rating").click(function(a){a.preventDefault();var r=e(this).find(".full-text");e(r).is(":visible")?e(r).hide():e(r).show()}),e(document).mouseup(function(a){var r=e(".german-market-legal-information-for-product-reviews.short-after-star-rating");r.is(a.target)||0!==r.has(a.target).length||e(".german-market-legal-information-for-product-reviews.short-after-star-rating .full-text").hide()})},sepa_direct_debit_checkout_form_handle:function(){e("#german_market_sepa_use_payment_information").length&&(e(".german-market-sepa-radio-wrapper input.radio-button").length?(e("body").on("change",".german-market-sepa-radio-wrapper input.radio-button",function(){a.sepa_direct_debit_checkout_form_handler(this)}),a.sepa_direct_debit_checkout_form_handler(e(".german-market-sepa-radio-wrapper input.radio-button"))):e(".german-market-sepa-save-payment-information-checkbox").show())},sepa_direct_debit_checkout_form_handler:function(a){e(".german-market-sepa-radio-wrapper label span").css({"font-weight":"bold","margin-left":"calc( 18px + 1em )","margin-bottom":"1em",display:"inline-block"}),!0===e(a).prop("checked")&&("saved"==e(a).val()?(e(a).parents("fieldset").find(".form-row").hide(),e(".german-market-sepa-save-payment-information-checkbox").hide(),e(".gm-sepa-direct-debit-second-checkout-disabled").show()):(e(a).parents("fieldset").find(".form-row").show(),e(".german-market-sepa-save-payment-information-checkbox").show(),e(".gm-sepa-direct-debit-second-checkout-disabled").hide()),e("#gm-sepa-mandate-preview-text").slideUp())},deactivate_ship_to_different_adress(){e("body").on("update_checkout",function(){gm_hide_ship_to_different_address=!1,e("body").trigger("gm_hide_ship_to_different_address"),gm_hide_ship_to_different_address?(e("#ship-to-different-address-checkbox").prop("checked",!1),e(".shipping_address").length&&e(".shipping_address").hide(),e(".woocommerce-shipping-fields").length&&e(".woocommerce-shipping-fields").hide()):e(".woocommerce-shipping-fields").length&&e(".woocommerce-shipping-fields").show()})},deactivate_ship_to_different_address_purchase_on_account:function(){e("body").on("gm_hide_ship_to_different_address",function(){if(e("#deactivate_ship_to_different_address_if_purchase_on_account").length){if(!e("#payment_method_german_market_purchase_on_account").length)return;e("#payment_method_german_market_purchase_on_account").prop("checked")?"1"!=e("#deactivate_ship_to_different_address_if_purchase_on_account").val()&&"yes"!=e("#deactivate_ship_to_different_address_if_purchase_on_account").val()||(e("#ship-to-different-address-checkbox").length&&!0===e("#ship-to-different-address-checkbox").prop("checked")&&e(ship_different_address.before_element).length&&(e("#german-market-puchase-on-account-message").length||e(ship_different_address.before_element).before(ship_different_address.message),e("#german-market-puchase-on-account-message").show()),gm_hide_ship_to_different_address||(gm_hide_ship_to_different_address=!0)):e("#german-market-puchase-on-account-message").length&&e("#german-market-puchase-on-account-message").hide()}})},second_checkout_place_order:function(){e(":submit.wgm-place-order").click(function(){e(".wgm-place-order-disabled").length&&e(".wgm-place-order-disabled").show()})},setupAjax:function(){"undefined"!=typeof wgm_wpml_ajax_language&&e.ajaxSetup({data:{lang:wgm_wpml_ajax_language}})},remove_totals:function(){1==woocommerce_remove_updated_totals.val&&e(".woocommerce_message").remove()},register_payment_update:function(){1==woocommerce_payment_update.val&&e(document.body).on("change",'input[name="payment_method"]',function(){e("body").trigger("update_checkout")})},on_update_variation:function(){if("gm_default"==german_market_price_variable_products.val){var a=e(".single-product"),r=e(".legacy-itemprop-offers");a.on("found_variation",".variations_form",function(){r.slideUp(),"none"!=german_market_price_variable_theme_extra_element.val&&jQuery(german_market_price_variable_theme_extra_element.val).slideUp()}),a.on("reset_data",".variations_form",function(){r.slideDown(),"none"!=german_market_price_variable_theme_extra_element.val&&jQuery(german_market_price_variable_theme_extra_element.val).slideDown()})}else if("gm_sepcial"==german_market_price_variable_products.val){(a=e(".single-product")).on("found_variation",".variations_form",function(){var a='<div id="german-market-variation-price"></div>',r=jQuery(".woocommerce-variation-price.woocommerce-variation-price").html();e(".woocommerce-variation-availability").length&&(r+=e(".woocommerce-variation-availability").html()),e(".woocommerce-variation-description").length&&(r+=e(".woocommerce-variation-description").html()),jQuery(".woocommerce-variation.single_variation").hide(),jQuery(".woocommerce-variation-price").hide(),jQuery(".legacy-itemprop-offers").hide(),"none"!=german_market_price_variable_theme_extra_element.val&&jQuery(german_market_price_variable_theme_extra_element.val).hide(),jQuery(".elementor-widget-woocommerce-product-price .price").length&&jQuery(".elementor-widget-woocommerce-product-price .price").hide(),jQuery(".dtwpb-price.price").length&&(jQuery("#german-market-variation-price").length||jQuery(a).insertAfter(".dtwpb-price.price"),jQuery(".dtwpb-price.price").hide(),jQuery(".gm-wp_bakery_woocommerce_get_price_html").length&&jQuery(".gm-wp_bakery_woocommerce_get_price_html").hide()),jQuery(".et_pb_wc_price").length&&(jQuery("#german-market-variation-price").length||jQuery(a).insertAfter(".et_pb_wc_price"),jQuery(".et_pb_wc_price").hide()),jQuery("#german-market-variation-price").length?jQuery("#german-market-variation-price").show():jQuery(a).insertAfter(".legacy-itemprop-offers"),jQuery("#german-market-variation-price").html(r)}),a.on("reset_data",".variations_form",function(){jQuery(".elementor-widget-woocommerce-product-price .price").length&&jQuery(".elementor-widget-woocommerce-product-price .price").show(),jQuery(".dtwpb-price.price").length&&(jQuery(".dtwpb-price.price").show(),jQuery(".gm-wp_bakery_woocommerce_get_price_html").length&&jQuery(".gm-wp_bakery_woocommerce_get_price_html").show()),jQuery(".et_pb_wc_price").length&&jQuery(".et_pb_wc_price").show(),jQuery(".legacy-itemprop-offers").show(),jQuery("#german-market-variation-price").hide(),"none"!=german_market_price_variable_theme_extra_element.val&&jQuery(german_market_price_variable_theme_extra_element.val).show()})}},sepa_direct_debit_show_preview:function(){var a=e(".wc_payment_methods input[name=payment_method]:checked"),r=e(".german-market-sepa-radio-wrapper input.radio-button:checked");if("german_market_sepa_direct_debit"!==a.val())return!1;if("saved"==r.val())return!0;var t={holder:e('[name="german-market-sepa-holder"]').val(),iban:e('[name="german-market-sepa-iban"]').val(),bic:e('[name="german-market-sepa-bic"]').val(),street:e('[name="billing_address_1"]').val(),zip:e('[name="billing_postcode"]').val(),city:e('[name="billing_city"]').val(),country:e('[name="billing_country"]').val()},i=!0;if(jQuery("#german-market-sepa-checkout-fields").is(":visible")){for(key in t)if(("bic"!=key&&"iban"!=key&&"holder"!=key||!e('[name="german-market-sepa-'+key+'"]').hasClass("gm-required-no"))&&void 0!==t[key]&&""==t[key].trim()){i=!1;break}}else i=!1;return i},sepa_direct_debit_show_preview_do:function(){a.sepa_direct_debit_show_preview()?(e(".gm-sepa-direct-debit-second-checkout-disabled").show(),e(".gm-sepa-direct-debit-order-pay").show()):(e(".gm-sepa-direct-debit-second-checkout-disabled").hide(),e(".gm-sepa-direct-debit-order-pay").hide(),e("#gm-sepa-mandate-preview-text").slideUp())},sepa_direct_debit:function(){e(document.body).on("click","#gm-sepa-mandate-preview",function(a){a.preventDefault();var r=!1;e("#german_market_sepa_use_payment_information").length&&(r=e("#german_market_sepa_use_payment_information").is(":checked"));var t={action:"gm_sepa_direct_debit_mandate_preview",holder:e('[name="german-market-sepa-holder"]').val(),iban:e('[name="german-market-sepa-iban"]').val(),bic:e('[name="german-market-sepa-bic"]').val(),street:e('[name="billing_address_1"]').val(),zip:e('[name="billing_postcode"]').val(),city:e('[name="billing_city"]').val(),country:e('[name="billing_country"]').val(),nonce:sepa_ajax_object.nonce,saved_data:r};jQuery.post(sepa_ajax_object.ajax_url,t,function(a){e("#gm-sepa-mandate-preview-text").html(a),e("#gm-sepa-mandate-preview-text").slideDown(),e("#gm-sepa-mandate-preview-text .close").click(function(){e("#gm-sepa-mandate-preview-text").slideUp()})})}),e("#gm-sepa-mandate-preview").ready(function(){if(e("#gm-sepa-mandate-preview").length){a.sepa_direct_debit_show_preview_do();var r={0:'[name="german-market-sepa-holder"]',1:'[name="german-market-sepa-iban"]',2:'[name="german-market-sepa-bic"]',3:'[name="billing_address_1"]',4:'[name="billing_postcode"]',5:'[name="billing_city"]',6:'[name="billing_country"]'};for(key in r)e(document.body).on("change keyup",r[key],a.sepa_direct_debit_show_preview_do)}}),e(document.body).on("change",'input[name="payment_method"]',function(){"german_market_sepa_direct_debit"==e(this).val()?(a.sepa_direct_debit_show_preview_do(),e(".gm-sepa-direct-debit-second-checkout-disabled").show()):e(".gm-sepa-direct-debit-second-checkout-disabled").hide()}),e(".gm-sepa-direct-debit-second-checkout-disabled").ready(function(){e("#payment_method_german_market_sepa_direct_debit").is(":checked")&&e(".gm-sepa-direct-debit-second-checkout-disabled").show()})},shipping_service_provider:function(){e("body").on("updated_checkout",function(a,r){if(e("#p-shipping-service-provider").length){var t=!0;e('select.shipping_method, input[name^="shipping_method"][type="radio"]:checked, input[name^="shipping_method"][type="hidden"]').each(function(){var a=e(this).val();if(t=a.includes("local_pickup"))return!1}),t?e("#p-shipping-service-provider").hide():e("#p-shipping-service-provider").show()}})}};a.init()});